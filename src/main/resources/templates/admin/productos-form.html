<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>Producto · RIPNEL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Tus estilos globales -->
  <link th:href="@{/css/app.css}" rel="stylesheet">
</head>

<body th:attr="data-bs-theme=${theme=='auto' ? null : theme}">
<div th:replace="~{_nav :: bar('Productos')}"></div>

<main class="container-xxl py-4">

  <div class="d-flex justify-content-between flex-wrap align-items-start gap-2 mb-3">
    <div>
      <h1 class="h4 mb-1"
          th:text="${prod.id} != null ? 'Editar producto' : 'Nuevo producto'">
        Nuevo producto
      </h1>
      <div class="text-secondary small">
        Registra el SKU, categoría, precio y stock inicial.
      </div>
    </div>

    <a class="btn btn-outline-secondary" th:href="@{/admin/productos}">
      ← Volver al listado
    </a>
  </div>

  <div class="card shadow-sm" style="max-width:600px;background-color:var(--bs-body-bg);">
    <div class="card-body">

      <form th:action="${prod.id} != null ?
                        @{'/admin/productos/' + ${prod.id}} :
                        @{/admin/productos}"
            method="post">

        <div class="row g-3">
          <!-- Código -->
          <div class="col-md-4">
            <label class="form-label">Código (SKU)</label>
            <input class="form-control"
                   name="code"
                   th:value="${prod.code}"
                   placeholder="P-0001"
                   required>
          </div>

          <!-- Nombre -->
          <div class="col-md-8">
            <label class="form-label">Nombre</label>
            <input class="form-control"
                   name="name"
                   th:value="${prod.name}"
                   placeholder="Polo negro talla M"
                   required>
          </div>

          <!-- Categoría -->
          <div class="col-md-6">
            <label class="form-label">Categoría</label>
            <select class="form-select" name="category.id" required>
              <option value="">-- Seleccionar --</option>
              <option th:each="c : ${cats}"
                      th:value="${c.id}"
                      th:text="${c.name}"
                      th:selected="${prod.category != null} ? ${c.id} == ${prod.category.id} : false">
              </option>
            </select>
          </div>

          <!-- Precio -->
          <div class="col-md-3">
            <label class="form-label">Precio (S/)</label>
            <input class="form-control"
                   name="price"
                   type="number"
                   step="0.01"
                   min="0"
                   th:value="${prod.price}"
                   required>
          </div>

          <!-- Stock inicial -->
          <div class="col-md-3">
            <label class="form-label">Stock</label>
            <input class="form-control"
                   name="stockQty"
                   type="number"
                   min="0"
                   th:value="${prod.stockQty}"
                   required>
          </div>

          <!-- Activo -->
          <div class="col-12">
            <div class="form-check form-switch">
              <input class="form-check-input"
                     type="checkbox"
                     id="activeSwitch"
                     name="active"
                     th:checked="${prod.active}">
              <label class="form-check-label" for="activeSwitch">Activo</label>
            </div>
          </div>

        </div>

        <hr class="my-4">

        <button class="btn btn-primary w-100" type="submit">
          Guardar
        </button>

      </form>

    </div>
  </div>

</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
